# ===============================
# FYERS API CREDENTIALS
# ===============================
fyers.api.app-id=0LJ7WSSBAY-100
fyers.api.secret-key=R3PAS21VYM

# ===============================
# H2 DATABASE (EMBEDDED - NO SETUP NEEDED!)
# ===============================
spring.datasource.url=jdbc:h2:mem:apex_trading_db
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 Console (optional)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# JPA Configuration
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# Enable JPA Auditing
spring.data.jpa.repositories.enabled=true

# ===============================
# CORS CONFIGURATION
# ===============================
spring.web.cors.allowed-origins=http://localhost:4200
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.web.cors.allow-credentials=true
spring.web.cors.allowed-headers=*

# ===============================
# SCHEDULER
# ===============================
spring.task.scheduling.pool.size=5

# ===============================
# LOGGING
# ===============================
logging.level.root=INFO
logging.level.com.apex.backend=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.pattern.console=%d{HH:mm:ss.SSS} %-5level %logger{36} - %msg%n
# ===============================
# APEX STRATEGY CONFIG (STEP 1)
# ===============================

apex.trading.capital=100000
apex.trading.risk-percent=1.0
apex.trading.max-positions=3

apex.strategy.macd.fast-period=12
apex.strategy.macd.slow-period=26
apex.strategy.macd.signal-period=9

apex.strategy.adx.period=14
apex.strategy.adx.threshold=25.0
apex.strategy.adx.strong-threshold=30.0

apex.strategy.rsi.period=14
apex.strategy.rsi.goldilocks-min=55.0
apex.strategy.rsi.goldilocks-max=70.0
apex.strategy.rsi.overbought=80.0
apex.strategy.rsi.oversold=30.0

apex.strategy.atr.period=14
apex.strategy.atr.min-percent=1.0
apex.strategy.atr.max-percent=4.0
apex.strategy.atr.stop-multiplier=2.0
apex.strategy.atr.target-multiplier=3.0

apex.strategy.squeeze.bollinger-period=20
apex.strategy.squeeze.bollinger-deviation=2.0
apex.strategy.squeeze.keltner-period=20
apex.strategy.squeeze.keltner-atr-multiplier=1.5
apex.strategy.squeeze.min-bars=8
apex.strategy.squeeze.tight-threshold=0.75

apex.risk.daily-loss-limit-pct=0.05
apex.risk.max-consecutive-losses=3
apex.risk.min-equity=10000
apex.risk.max-position-loss-pct=0.02
apex.risk.slippage-pct=0.002
apex.risk.target-multiplier=3.0


# ===============================
# APEX SCORING & SIZING (STEP 2)
# ===============================

# Scoring weights (must total 100)
apex.scoring.vwap.weight=5
apex.scoring.momentum.weight=30
apex.scoring.trend.weight=25
apex.scoring.rsi.weight=15
apex.scoring.volatility.weight=10
apex.scoring.squeeze.weight=15

# Grade bands
apex.scoring.grade.a3.min=90   # A+++ (90-100)
apex.scoring.grade.a2.min=85   # A++  (85-89)
apex.scoring.grade.a1.min=80   # A+   (80-84)
apex.scoring.grade.a0.min=75   # A    (75-79)
apex.scoring.grade.b.min=70    # B    (70-74)

# Sizing multipliers by grade
apex.sizing.multiplier.a3=2.0   # A+++
apex.sizing.multiplier.a2=1.5   # A++
apex.sizing.multiplier.a1=1.0   # A+
apex.sizing.multiplier.a0=1.0   # A
apex.sizing.multiplier.b=0.75   # B

# Minimum score to allow any trade
apex.scoring.min.entry.score=70

# ===============================
# APEX EXIT ENGINE (STEP 3)
# ===============================

# Breakeven move threshold (R-multiple)
apex.exit.breakeven.threshold=0.5

# Trailing stop activation threshold (R-multiple)
apex.exit.trailing.threshold=1.5

# Trailing stop distance (ATR multiple)
apex.exit.trailing.multiplier=1.5

# Time stop (bars in trade before early exit)
apex.exit.time.stop.bars=20

# Maximum bars in trade (force exit)
apex.exit.max.bars=50

# ===============================
# APEX SCANNER CONFIG (STEP 4)
# ===============================

# Enable/disable automated scanning
apex.scanner.enabled=true

# Minimum signal score to save
apex.scanner.min.score=60

# Maximum candidates to save per scan cycle
apex.scanner.max.candidates=10

# Scan interval in milliseconds (300000 = 5 min)
apex.scanner.interval=300000

# ===============================
# TRADING UNIVERSE
# ===============================

# Comma-separated list of symbols to scan
apex.trading.universe.symbols=NSE:RELIANCE-EQ,NSE:TCS-EQ,NSE:INFY-EQ,NSE:HDFCBANK-EQ,NSE:ICICIBANK-EQ,NSE:SBIN-EQ,NSE:WIPRO-EQ,NSE:LT-EQ,NSE:AXISBANK-EQ,NSE:BHARTIARTL-EQ

# Fallback if symbols list is empty
apex.trading.universe.useFallback=true


# HikariCP Connection Pooling
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000