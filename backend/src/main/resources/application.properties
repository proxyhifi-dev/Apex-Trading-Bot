# Application Configuration
spring.application.name=apex-trading-bot

# Server Configuration
server.port=8080

# Database Configuration
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5433}/${DB_NAME:apex_trading_db}
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.hibernate.naming.implicit-strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy
spring.jpa.hibernate.naming.physical-strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy

# Flyway
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true

# JWT Configuration (env-only)
jwt.secret=${JWT_SECRET}
jwt.expiration=3600000
jwt.refresh-expiration=604800000

# Fyers API Configuration
fyers.api.app-id=${FYERS_API_APP_ID:}
fyers.api.secret-key=${FYERS_API_SECRET_KEY:}
fyers.redirect-uri=${FYERS_REDIRECT_URI:http://localhost:4200/auth/fyers/callback}
fyers.api.access-token=${FYERS_ACCESS_TOKEN:}

# Actuator / Observability
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when_authorized

# Logging Configuration
logging.level.com.apex.backend=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG

# Bot Configuration
apex.scanner.interval=60

# Strategy Configuration
strategy.macd.fast-period=12
strategy.macd.slow-period=26
strategy.macd.signal-period=9
strategy.macd.min-momentum-score=6.0

strategy.adx.period=14
strategy.adx.threshold=25.0
strategy.adx.strong=30.0

strategy.rsi.period=14
strategy.rsi.goldilocks-min=45.0
strategy.rsi.goldilocks-max=65.0
strategy.rsi.overbought=70.0
strategy.rsi.oversold=30.0

strategy.atr.period=14
strategy.atr.min-percent=0.5
strategy.atr.max-percent=5.0
strategy.atr.stop-multiplier=1.5
strategy.atr.target-multiplier=3.0

strategy.bollinger.period=20
strategy.bollinger.deviation=2.0

strategy.keltner.period=20
strategy.keltner.atr-multiplier=1.5

strategy.squeeze.min-bars=5
strategy.squeeze.tight-threshold=0.8

strategy.exit.breakeven-threshold=0.5
strategy.exit.trailing-threshold=1.5
strategy.exit.trailing-multiplier=1.5
strategy.exit.time-stop-bars=20
strategy.exit.max-bars=50

strategy.sizing.base-risk=0.01
strategy.sizing.multiplier-aaa=2.0
strategy.sizing.multiplier-aa=1.5
strategy.sizing.multiplier-a=1.0

strategy.circuit.daily-loss-limit=0.02
strategy.circuit.weekly-loss-limit=0.10
strategy.circuit.monthly-loss-limit=0.15
strategy.circuit.max-consecutive-losses=3
strategy.circuit.auto-pause=true

strategy.scoring.momentum-weight=20.0
strategy.scoring.trend-weight=20.0
strategy.scoring.rsi-weight=20.0
strategy.scoring.volatility-weight=20.0
strategy.scoring.squeeze-weight=20.0

strategy.scanner.max-candidates=5
strategy.scanner.require-manual-approval=false

# UI Integration Configuration
apex.ui.api-base-url=${APEX_UI_API_BASE_URL:http://127.0.0.1:8080/api}
apex.ui.ws-url=${APEX_UI_WS_URL:ws://127.0.0.1:8080/ws}

# Bootstrap controls
apex.bootstrap.default-users=true
