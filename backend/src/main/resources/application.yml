apex:
  advanced:
    market-regime:
      trending-adx-threshold: 25.0
      strong-trend-adx: 30.0
      high-vol-atr-percent: 3.0
      low-vol-atr-percent: 1.0
      chop-filter-enabled: false
      chop-period: 14
      choppy-threshold: 61.8

    macd-confirmation:
      divergence-lookback: 30
      histogram-slope-lookback: 3

    candle-confirmation:
      required-candles: 3
      volume-confirmation: true
      volume-multiplier: 1.2
      avg-volume-period: 20

    multi-timeframe-momentum:
      weights:
        5m: 0.4
        15m: 0.3
        1h: 0.2
        1d: 0.1
      conflict-penalty: 0.15

    risk:
      max-portfolio-heat-pct: 0.06
      correlation-threshold: 0.7
      correlation-lookback: 50
      kelly-lookback-trades: 50
      kelly-fraction: 0.25
      max-daily-loss-pct: 0.02
      max-weekly-loss-pct: 0.1
      max-monthly-loss-pct: 0.15
      circuit-breakers:
        enabled: false
        max-consecutive-losses: 2
        cooldown-minutes: 45

    execution-cost:
      spread-bps: 5.0
      slippage-atr-pct: 0.1
      commission-pct: 0.0003
      stt-pct: 0.00025
      txn-pct: 0.00003
      sebi-pct: 0.000001
      gst-pct: 0.18

    liquidity:
      min-rupee-volume: 2000000.0
      max-spread-pct: 0.3
      max-order-pct-daily-volume: 0.02
      impact-lambda: 0.1
      gate-enabled: false

    backtest:
      max-bars-in-trade: 50
      in-sample-bars: 200
      out-sample-bars: 100
      decay-lookback-trades: 20
      time-stop-bars: 12
      time-stop-min-move-r: 0.3
      chandelier-atr-mult: 3.0

    broker:
      failure-threshold: 3
      cool-down-seconds: 120

    audit:
      retention-days: 30

strategy:
  health:
    rolling-trades: 30
    min-expectancy: 0.1
    min-sharpe: 0.5
    max-drawdown-pct: 0.1
    max-consecutive-loss-probability: 0.2
  breakout:
    use-donchian: false
    donchian-period: 20
    require-structure-breakout: false
  trading-window:
    enabled: false
    timezone: "Asia/Kolkata"
    windows:
      - "09:20-11:30"
      - "13:45-15:10"
    blackout: []
  sizing:
    dynamic:
      enabled: false
      min-multiplier: 0.5
      max-multiplier: 1.0
      score-floor: 60
      score-ceil: 90
  market-gate:
    enabled: false
    index-symbol: "NSE:NIFTY50-EQ"
    ema-fast: 50
    ema-slow: 200
    require-price-above-fast-ema: true
    block-if-index-data-stale: true
    max-stale-seconds: 300
  vol-shock:
    enabled: false
    lookback: 50
    multiplier: 1.8
    cooldown-bars: 6

execution:
  spread-pct: 0.0005
  slippage-atr-pct: 0.1
  impact-factor: 0.05
  avg-daily-notional: 10000000.0
  latency-millis: 200
  latency-move-pct-per-second: 0.0005
  limit-fill-max-distance-pct: 0.002
  limit-fill-volume-factor: 0.2
  default-order-type: MARKET

  entry-timeout-seconds: 30
  stop-ack-timeout-seconds: 5
  cancel-on-timeout: true

  partial-fill:
    policy: CANCEL_REMAIN   # CANCEL_REMAIN | KEEP_OPEN | CANCEL_AND_FLATTEN
    min-fill-pct: 80.0
    cancel-timeout-seconds: 5

analytics:
  validation:
    bootstrap-samples: 500
    num-trials: 50
  cvar:
    confidence: 95

risk:
  ruin:
    risk-per-trade-pct: 0.01
    bankroll-r: 50

  correlation:
    lookback: 50
    spike-threshold: 0.75
    sizing-multiplier-on-spike: 0.5

  trade-cooldown:
    minutes: 5   # Cooldown period per symbol after trade

data-quality:
  max-missing-candles: 1
  max-gap-multiplier: 2.0
  outlier-pct: 0.1
  max-stale-seconds: 300   # 5 minutes

reconcile:
  enabled: true
  interval-seconds: 300
  safe-mode-on-mismatch: true
  qty-tolerance: 1
  price-tolerance-pct: 0.25
  auto-cancel-pending-on-mismatch: true
  auto-flatten-on-mismatch: false

crisis:
  enabled: true
  index-symbol: NSE:NIFTY50-EQ
  drop-threshold-pct: 5.0
  vix-threshold: 30.0
  halt-duration-minutes: 30
